# Documentation for server/ui-designer-service.ts

Initialize OpenAI
UI Designer system prompt
Fetch available surveys if chatbotId is provided
Parse and validate the response
Extract config and explanation from response
Ensure components array exists
Add some basic validation and cleanup before schema validation
Ensure required component fields exist
Ensure props object exists
Ensure description exists for actions
Convert surveyId from string to number if present
Ensure required fields exist for topics
Convert surveyId from string to number if present
Return both config and explanation
Fetch available surveys if chatbotId is provided
Parse and validate the response
Extract config and explanation from response
Ensure components array exists
Add the same cleanup logic as in generateHomeScreenConfig
Ensure required component fields exist
Ensure props object exists
Convert surveyId from string to number if present
Convert surveyId from string to number if present
CRITICAL: Preserve existing theme if AI didn't include it or if it's missing
Preserve existing theme properties that weren't explicitly modified
Return both config and explanation
Default home screen configuration